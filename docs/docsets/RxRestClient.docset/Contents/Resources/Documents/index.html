<!DOCTYPE html>
<html lang="en">
  <head>
    <title>RxRestClient  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>
    <a title="RxRestClient  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">RxRestClient 2.2.0 Docs</a> (18% documented)</p>
        <p class="header-right"><a href="https://github.com/STDevTM/RxRestClient"><img src="img/gh.png"/>View on GitHub</a></p>
        <p class="header-right">
          <form role="search" action="search.json">
            <input type="text" placeholder="Search documentation" data-typeahead>
          </form>
        </p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">RxRestClient Reference</a>
        <img id="carat" src="img/carat.png" />
        RxRestClient  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/DefaultReachabilityService.html">DefaultReachabilityService</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/MultipartFormDataBuilder.html">MultipartFormDataBuilder</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/PagingState.html">PagingState</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Reachability.html">Reachability</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Reachability/NetworkStatus.html">– NetworkStatus</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/RxRestClient.html">RxRestClient</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Global%20Variables.html">Global Variables</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Global%20Variables.html#/s:12RxRestClient31ReachabilityChangedNotificationSo18NSNotificationNameavp">ReachabilityChangedNotification</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/BaseResponse.html">BaseResponse</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/MIMETypes.html">MIMETypes</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ReachabilityError.html">ReachabilityError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ReachabilityServiceError.html">ReachabilityServiceError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ReachabilityStatus.html">ReachabilityStatus</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/RestResponseStatus.html">RestResponseStatus</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/RxRestClientError.html">RxRestClientError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ServiceState.html">ServiceState</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Extensions.html#/s:10Foundation4DataV">Data</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/Encodable.html">Encodable</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/NSString.html">NSString</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/String.html">String</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/URL.html">URL</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/PagingQueryProtocol.html">PagingQueryProtocol</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/PagingResponseProtocol.html">PagingResponseProtocol</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/ReachabilityService.html">ReachabilityService</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols.html#/s:12RxRestClient12ResponseBodyP">ResponseBody</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/ResponseState.html">ResponseState</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/BaseState.html">BaseState</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/DefaultState.html">DefaultState</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/RxRestClientOptions.html">RxRestClientOptions</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <h1 id='rxrestclient' class='heading'>RxRestClient</h1>

<p><a href="https://github.com/STDevTM/RxRestClient/actions"><img src="https://github.com/STDevTM/RxRestClient/workflows/RxRestClient/badge.svg?branch=master" alt="CI Status"></a>
<a href="https://cocoapods.org/pods/RxRestClient"><img src="https://img.shields.io/cocoapods/v/RxRestClient.svg?style=flat" alt="Version"></a>
<a href="https://cocoapods.org/pods/RxRestClient"><img src="https://img.shields.io/cocoapods/l/RxRestClient.svg?style=flat" alt="License"></a>
<a href="https://stdevtm.github.io/RxRestClient/"><img src="https://img.shields.io/cocoapods/p/RxRestClient.svg?style=flat" alt="Platform"></a></p>
<h2 id='example' class='heading'>Example</h2>

<p>To run the example project, clone the repo, and run <code>pod install</code> from the Example directory first.</p>
<h2 id='requirements' class='heading'>Requirements</h2>

<ul>
<li>iOS 10.0+</li>
<li>Swift 5.1+</li>
<li>Xcode 11+</li>
</ul>
<h2 id='migration-guides' class='heading'>Migration Guides</h2>

<ul>
<li><a href="./Documentation/RxRestClient%202.0%20Migration%20Guide.md">RxRestClient 2.0 Migration Guide</a></li>
</ul>
<h2 id='installation' class='heading'>Installation</h2>

<details>
<summary>CocoaPods</summary>
</br>
<p>RxRestClient is available through <a href="http://cocoapods.org">CocoaPods</a>. To install it, simply add the following line to your <code>Podfile</code>:</p>

<pre><code class="ruby language-ruby">pod 'RxRestClient'</code></pre>
</details>

<details>
<summary>Swift Package Manager</summary>
</br>
<p>You can use <a href="https://swift.org/package-manager">The Swift Package Manager</a> to install <code><a href="Classes/RxRestClient.html">RxRestClient</a></code> by adding the proper description to your <code>Package.swift</code> file:</p>

<pre><code class="swift language-swift">import PackageDescription

let package = Package(
    name: "YOUR_PROJECT_NAME",
    targets: [],
    dependencies: [
        .package(url: "https://github.com/STDevTM/RxRestClient.git", from: "2.1.0")
    ]
)
</code></pre>

<p>Next, add <code><a href="Classes/RxRestClient.html">RxRestClient</a></code> to your targets dependencies like so:</p>
<pre><code class="swift language-swift">.target(
    name: "YOUR_TARGET_NAME",
    dependencies: [
        "RxRestClient",
    ]
),</code></pre>
<p>Then run <code>swift package update</code>.</p>

</details>
<h2 id='features' class='heading'>Features</h2>

<ul>
<li>Simple way to do requests</li>
<li>Simple way to have response state in reactive way</li>
<li>Ability to customization</li>
<li>Retry on any error</li>
<li>Handle network reachability status</li>
<li>Retry on become reachable</li>
<li>Ability to use absolute and relative urls</li>
<li>Swift Codable protocol support</li>
<li>Use custom SessionManager</li>
<li>Pagination support</li>
<li><a href="https://stdevtm.github.io/RxRestClient/">Complete Documentation</a></li>
<li><em>more coming soon</em></li>
</ul>
<h2 id='how-to-use' class='heading'>How to use</h2>

<p>First of all you need to create <code>struct</code> of your response state and implement <code><a href="Protocols/ResponseState.html">ResponseState</a></code> protocol.</p>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">RepositoriesState</span><span class="p">:</span> <span class="kt">ResponseState</span> <span class="p">{</span>

    <span class="kd">typealias</span> <span class="kt">Body</span> <span class="o">=</span> <span class="kt">Data</span>

    <span class="k">var</span> <span class="nv">state</span><span class="p">:</span> <span class="kt">BaseState</span><span class="p">?</span>
    <span class="k">var</span> <span class="nv">data</span><span class="p">:</span> <span class="p">[</span><span class="kt">Repository</span><span class="p">]?</span>

    <span class="kd">private</span> <span class="nf">init</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">state</span> <span class="o">=</span> <span class="kc">nil</span>
    <span class="p">}</span>

    <span class="nf">init</span><span class="p">(</span><span class="nv">state</span><span class="p">:</span> <span class="kt">BaseState</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">state</span>
    <span class="p">}</span>

    <span class="nf">init</span><span class="p">(</span><span class="nv">response</span><span class="p">:</span> <span class="p">(</span><span class="kt">HTTPURLResponse</span><span class="p">,</span> <span class="kt">Data</span><span class="p">?))</span> <span class="p">{</span>
        <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="mi">0</span><span class="o">.</span><span class="n">statusCode</span> <span class="o">==</span> <span class="mi">200</span><span class="p">,</span> <span class="k">let</span> <span class="nv">body</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="mi">1</span> <span class="p">{</span>
            <span class="k">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="k">try</span><span class="p">?</span> <span class="kt">JSONDecoder</span><span class="p">()</span><span class="o">.</span><span class="nf">decode</span><span class="p">(</span><span class="kt">RepositoryResponse</span><span class="o">.</span><span class="k">self</span><span class="p">,</span> <span class="nv">from</span><span class="p">:</span> <span class="n">body</span><span class="p">)</span><span class="o">.</span><span class="n">items</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="kd">static</span> <span class="k">let</span> <span class="nv">empty</span> <span class="o">=</span> <span class="kt">RepositoriesState</span><span class="p">()</span>
<span class="p">}</span>
</code></pre>

<p>It is required to mention expected Body type (<code>String</code> or <code>Data</code>).</p>

<p>After that you need to create request model:</p>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">RepositoryQuery</span><span class="p">:</span> <span class="kt">Encodable</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">q</span><span class="p">:</span> <span class="kt">String</span>
<span class="p">}</span>

</code></pre>

<p>Then you can do the request to get repositories:</p>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">RxSwift</span>
<span class="kd">import</span> <span class="kt">RxRestClient</span>

<span class="kd">protocol</span> <span class="kt">RepositoriesServiceProtocol</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">get</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="kt">RepositoryQuery</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Observable</span><span class="o">&lt;</span><span class="kt">RepositoriesState</span><span class="o">&gt;</span>
<span class="p">}</span>

<span class="kd">final</span> <span class="kd">class</span> <span class="kt">RepositoriesService</span><span class="p">:</span> <span class="kt">RepositoriesServiceProtocol</span> <span class="p">{</span>

    <span class="kd">private</span> <span class="k">let</span> <span class="nv">client</span> <span class="o">=</span> <span class="kt">RxRestClient</span><span class="p">()</span>

    <span class="kd">func</span> <span class="nf">get</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="kt">RepositoryQuery</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Observable</span><span class="o">&lt;</span><span class="kt">RepositoriesState</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">client</span><span class="o">.</span><span class="nf">get</span><span class="p">(</span><span class="s">"https://api.github.com/search/repositories"</span><span class="p">,</span> <span class="nv">query</span><span class="p">:</span> <span class="n">query</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre>

<p>In order to customize client you can use <code><a href="Structs/RxRestClientOptions.html">RxRestClientOptions</a></code>:</p>
<pre class="highlight swift"><code><span class="k">var</span> <span class="nv">options</span> <span class="o">=</span> <span class="kt">RxRestClientOptions</span><span class="o">.</span><span class="k">default</span>
<span class="n">options</span><span class="o">.</span><span class="nf">addHeader</span><span class="p">(</span><span class="nv">key</span><span class="p">:</span> <span class="s">"x-apikey"</span><span class="p">,</span> <span class="nv">value</span><span class="p">:</span> <span class="s">"&lt;API_KEY&gt;"</span><span class="p">)</span>
<span class="n">client</span> <span class="o">=</span> <span class="kt">RxRestClient</span><span class="p">(</span><span class="nv">baseUrl</span><span class="p">:</span> <span class="o">&lt;</span><span class="kt">BASE</span> <span class="n">_URL</span><span class="o">&gt;</span><span class="p">),</span> <span class="nv">options</span><span class="p">:</span> <span class="n">options</span><span class="p">)</span>
</code></pre>
<h3 id='relative-vs-absolute-url' class='heading'>Relative vs absolute url</h3>

<p>In order to use relative url you need to give <code>&lt;BASE_URL&gt;</code> when initializing client object.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">client</span> <span class="o">=</span> <span class="kt">RxRestClient</span><span class="p">(</span><span class="nv">baseURL</span><span class="p">:</span> <span class="o">&lt;</span><span class="kt">BASE_URL</span><span class="o">&gt;</span><span class="p">)</span>
</code></pre>

<p>When calling any request you can provide either <code>String</code> endpoint or absolute <code>URL</code>. If you will <code>String</code> it will be appended to <code>baseURL</code>.</p>
<pre class="highlight swift"><code><span class="n">client</span><span class="o">.</span><span class="nf">get</span><span class="p">(</span><span class="s">"rest/contacts"</span><span class="p">)</span>
</code></pre>

<p>If <code>baseURL</code> is <code>nil</code> then it will try to convert provided <code>String</code> to <code>URL</code>.</p>

<p>In order to use absolute url even when your client has <code>baseURL</code> you can provide <code>URL</code> like this:</p>
<pre class="highlight swift"><code><span class="k">if</span> <span class="k">let</span> <span class="nv">url</span> <span class="o">=</span> <span class="kt">URL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="s">"https://api.github.com/search/repositories"</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">client</span><span class="o">.</span><span class="nf">get</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span> <span class="nv">query</span><span class="p">:</span> <span class="p">[</span><span class="s">"q"</span><span class="p">:</span> <span class="n">search</span><span class="p">])</span>
<span class="p">}</span>
</code></pre>
<h3 id='pagination' class='heading'>Pagination</h3>

<p>Pagination support is working only for <code>GET</code> requests. In order to have pagination (or infinite scrolling) feature you need to implement following protocols for query and response models:</p>

<p>For query model you need to implement <code><a href="Protocols/PagingQueryProtocol.html">PagingQueryProtocol</a></code>:</p>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">RepositoryQuery</span><span class="p">:</span> <span class="kt">PagingQueryProtocol</span> <span class="p">{</span>

    <span class="k">let</span> <span class="nv">q</span><span class="p">:</span> <span class="kt">String</span>
    <span class="k">var</span> <span class="nv">page</span><span class="p">:</span> <span class="kt">Int</span>

    <span class="nf">init</span><span class="p">(</span><span class="nv">q</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">q</span> <span class="o">=</span> <span class="n">q</span>
        <span class="k">self</span><span class="o">.</span><span class="n">page</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">nextPage</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">RepositoryQuery</span> <span class="p">{</span>
        <span class="k">var</span> <span class="nv">new</span> <span class="o">=</span> <span class="k">self</span>
        <span class="k">new</span><span class="o">.</span><span class="n">page</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="k">new</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>For response model you need to implement <code><a href="Protocols/PagingResponseProtocol.html">PagingResponseProtocol</a></code>:</p>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">RepositoryResponse</span><span class="p">:</span> <span class="kt">PagingResponseProtocol</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">totalCount</span><span class="p">:</span> <span class="kt">Int</span>
    <span class="k">var</span> <span class="nv">repositories</span><span class="p">:</span> <span class="p">[</span><span class="kt">Repository</span><span class="p">]</span>

    <span class="kd">private</span> <span class="kd">enum</span> <span class="kt">CodingKeys</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span> <span class="kt">CodingKey</span> <span class="p">{</span>
        <span class="k">case</span> <span class="n">totalCount</span> <span class="o">=</span> <span class="s">"total_count"</span>
        <span class="k">case</span> <span class="n">repositories</span> <span class="o">=</span> <span class="s">"items"</span>
    <span class="p">}</span>

    <span class="c1">// MARK: - PagingResponseProtocol</span>
    <span class="kd">typealias</span> <span class="kt">Item</span> <span class="o">=</span> <span class="kt">Repository</span>

    <span class="kd">static</span> <span class="k">var</span> <span class="nv">decoder</span><span class="p">:</span> <span class="kt">JSONDecoder</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">.</span><span class="nf">init</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="k">var</span> <span class="nv">canLoadMore</span><span class="p">:</span> <span class="kt">Bool</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">totalCount</span> <span class="o">&gt;</span> <span class="n">items</span><span class="o">.</span><span class="n">count</span>
    <span class="p">}</span>

    <span class="k">var</span> <span class="nv">items</span><span class="p">:</span> <span class="p">[</span><span class="kt">Repository</span><span class="p">]</span> <span class="p">{</span>
        <span class="k">get</span> <span class="p">{</span>
            <span class="k">return</span> <span class="n">repositories</span>
        <span class="p">}</span>
        <span class="nf">set</span><span class="p">(</span><span class="n">newValue</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">repositories</span> <span class="o">=</span> <span class="n">newValue</span>
        <span class="p">}</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre>

<p>For response states you need to use <code><a href="Classes/PagingState.html">PagingState</a></code> class or custom subclass:</p>
<pre class="highlight swift"><code><span class="kd">final</span> <span class="kd">class</span> <span class="kt">RepositoriesState</span><span class="p">:</span> <span class="kt">PagingState</span><span class="o">&lt;</span><span class="kt">RepositoryResponse</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="o">...</span>
<span class="p">}</span>
</code></pre>

<p>After having all necessary models you can do your request:</p>
<pre class="highlight swift"><code><span class="n">client</span><span class="o">.</span><span class="nf">get</span><span class="p">(</span><span class="s">"https://api.github.com/search/repositories"</span><span class="p">,</span> <span class="nv">query</span><span class="p">:</span> <span class="n">query</span><span class="p">,</span> <span class="nv">loadNextPageTrigger</span><span class="p">:</span> <span class="n">loadNextPageTrigger</span><span class="p">)</span>
</code></pre>

<p><code>loadNextPageTrigger</code> is an <code>Observable</code> with <code>Void</code> type in order to trigger client to do request for next page using new query model generated using <code>nextPage()</code> function. </p>
<h2 id='author' class='heading'>Author</h2>

<p>Tigran Hambardzumyan, <a href="mailto:tigran@stdevmail.com">tigran@stdevmail.com</a></p>
<h2 id='support' class='heading'>Support</h2>

<p>Feel free to <a href="https://github.com/stdevteam/RxRestClient/issues/new">open issues</a> with any suggestions, bug reports, feature requests, questions.</p>
<h2 id='let-us-know' class='heading'>Let us know!</h2>

<p>We’d be really happy if you sent us links to your projects where you use our component. Just send an email to <a href="mailto:developer@stdevmail.com">developer@stdevmail.com</a> and do let us know if you have any questions or suggestion.</p>
<h2 id='license' class='heading'>License</h2>

<p>RxRestClient is available under the MIT license. See the LICENSE file for more info.</p>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2020 <a class="link" href="https://github.com/hamtiko" target="_blank" rel="external">Tigran Hambardzumyan</a>. All rights reserved. (Last updated: 2020-07-24)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.13.5</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
